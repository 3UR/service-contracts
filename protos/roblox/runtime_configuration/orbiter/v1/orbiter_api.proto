//  gRPC Service
//
// Copyright Â© 2020 Roblox
//
syntax = "proto3";

package roblox.runtimeconfiguration.orbiter.v1;

option csharp_namespace = "Roblox.Runtimeconfiguration.Orbiter.V1";
option go_package = "roblox/runtime_configuration/orbiter/v1;orbiterv1";
option java_multiple_files = true;
option java_outer_classname = "OrbiterApiProto";
option java_package = "com.roblox.runtimeconfiguration.orbiter.v1";

import "roblox/runtime_configuration/orbiter/v1/orbiter.proto";

// OrbiterAPI service to monitor for configuration changes and retrieve configurations.
service OrbiterAPI {
  // Gets the configuration for the given project group.
  // This is the recommended call when only one project group configuration is needed in a single request.
  rpc GetProjectGroupConfiguration(GetProjectGroupConfigurationRequest) returns (GetProjectGroupConfigurationResponse) {}

  // Gets the configurations for the given project groups.
  // This is a bulk request and should only be used if multiple project group configurations are needed in a single request.
  // For simplicity, use GetProjectGroupConfiguration if only one project group configuration is needed in a single request.
  rpc GetProjectGroupConfigurations(GetProjectGroupConfigurationsRequest) returns (GetProjectGroupConfigurationsResponse) {}

  // Gets the configurations for the given projects.
  // DEPRECATED - this is no longer the way to retrieve configurations and GetProjectGroupConfiguration or GetProjectGroupConfigurations should be used instead.
  rpc GetProjectConfigurations(GetProjectConfigurationsRequest) returns (GetProjectConfigurationsResponse) {}
}

// Represents a request for the GetProjectGroupConfiguration operation.
message GetProjectGroupConfigurationRequest {
    string project_name = 1;

    string group_name = 2;

    repeated Attribute attributes = 3;
}

// Represents a response for the GetProjectGroupConfiguration operation.
// The returned configurations will include configurations for the requested group as well as configurations for any referenced groups.
// ie. if group A references group B and C and group A is requested, then configurations for group A, B, and C will be returned.
message GetProjectGroupConfigurationResponse {
    repeated GroupConfiguration group_configurations = 1;
}

// Represents a request for the GetProjectGroupConfigurations operation.
message GetProjectGroupConfigurationsRequest {
    repeated ProjectGroup project_groups = 1;
}

// Represents a response for the GetProjectGroupConfigurations operation.
message GetProjectGroupConfigurationsResponse {
    repeated ProjectGroupConfiguration project_group_configurations = 1;
}

// Represents a request for the GetProjectConfigurations operation.
// DEPRECATED.
message GetProjectConfigurationsRequest {
    repeated Project projects = 1;
}

// Represents a response for the GetProjectConfigurations operation.
// DEPRECATED.
message GetProjectConfigurationsResponse {
    repeated ProjectConfiguration project_configurations = 1;
}